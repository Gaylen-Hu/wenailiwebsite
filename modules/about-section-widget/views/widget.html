{% set widget = data.widget %}
{% set isDark = widget.backgroundStyle == 'dark' %}
{% set sectionClasses = 'py-20 ' + (isDark ? 'bg-gray-900' : 'bg-gray-50') %}
{% set headingColor = isDark ? 'text-white' : 'text-gray-900' %}
{% set bodyColor = isDark ? 'text-gray-300' : 'text-gray-700' %}
{% set subColor = isDark ? 'text-gray-400' : 'text-gray-600' %}
{% set imageColumnClasses = widget.layout == 'image-right' ? 'lg:order-2' : 'lg:order-1' %}
{% set contentColumnClasses = widget.layout == 'image-right' ? 'lg:order-1' : 'lg:order-2' %}

<section class="{{ sectionClasses }}" data-stats-section>
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    {% if widget.eyebrow or widget.heading %}
      <div class="text-center mb-16">
        {% if widget.eyebrow %}
          <p class="text-sm font-semibold uppercase tracking-widest text-blue-500 mb-3">
            {{ widget.eyebrow }}
          </p>
        {% endif %}
        {% if widget.heading %}
          <h2 class="text-3xl md:text-4xl font-bold {{ headingColor }} mb-4">
            {{ widget.heading | safe }}
          </h2>
        {% endif %}
        <div class="w-20 h-1 bg-blue-600 mx-auto"></div>
      </div>
    {% endif %}

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
      <div class="relative {{ imageColumnClasses }}">
        {% if widget.image %}
          <div class="rounded-xl overflow-hidden shadow-2xl">
            <img
              src="{{ apos.attachment.url(widget.image, { size: 'full' }) }}"
              alt="{{ widget.imageAlt or '关于我们配图' }}"
              class="w-full h-auto object-cover"
              loading="lazy"
            />
          </div>
          <div class="absolute -bottom-6 -right-6 w-40 h-40 bg-blue-100 rounded-full -z-10"></div>
          <div class="absolute -top-6 -left-6 w-24 h-24 bg-indigo-100 rounded-full -z-10"></div>
          {% if widget.imageCaption %}
            <p class="mt-4 text-sm {{ subColor }}">
              {{ widget.imageCaption }}
            </p>
          {% endif %}
        {% endif %}
      </div>

      <div class="{{ contentColumnClasses }}">
        {% if widget.descriptionOne %}
          <p class="{{ bodyColor }} mb-6 leading-relaxed">
            {{ widget.descriptionOne }}
          </p>
        {% endif %}
        {% if widget.descriptionTwo %}
          <p class="{{ bodyColor }} mb-8 leading-relaxed">
            {{ widget.descriptionTwo }}
          </p>
        {% endif %}

        {% set statCount = widget.stats | length %}
        {% if statCount %}
          <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
            {% for stat in widget.stats %}
              <div class="text-center">
                <div class="text-3xl font-bold text-blue-600 mb-1">
                  <span
                    data-counter
                    data-target="{{ stat.targetValue }}"
                    data-duration="{{ stat.duration or 2000 }}"
                    data-decimals="{{ stat.decimals or 0 }}"
                    data-prefix="{{ stat.prefix or '' }}"
                    data-suffix="{{ stat.suffix or '' }}"
                  >
                    {{ (stat.prefix or '') + '0' + (stat.suffix or '') }}
                  </span>
                </div>
                <div class="{{ subColor }}">{{ stat.label }}</div>
              </div>
            {% endfor %}
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</section>

