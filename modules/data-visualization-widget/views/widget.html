{% set sectionClass = data.widget.backgroundClass or 'py-20 bg-gray-50' %}

<section class="{{ sectionClass }} data-viz-widget" data-data-visualization-widget>
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
      {% if data.widget.heading %}
        <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">
          {{ data.widget.heading | escape }}
        </h2>
        <div class="w-20 h-1 bg-blue-600 dark:bg-blue-500 mx-auto mb-6"></div>
      {% endif %}
      {% if data.widget.subheading %}
        <p class="text-gray-600 dark:text-gray-300 max-w-2xl mx-auto text-xl">
          {{ data.widget.subheading | escape }}
        </p>
      {% endif %}
    </div>

    {% set chartCards = data.widget.charts or [] %}
    {% if chartCards.length %}
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-10">
        {% for card in chartCards %}
          <article class="bg-white dark:bg-gray-900/80 border border-gray-100 dark:border-gray-800 rounded-2xl shadow-xl p-6 flex flex-col gap-6 transition-all duration-300">
            {% if card.title %}
              <div>
                <h3 class="text-xl font-bold text-gray-900 dark:text-white">
                  {{ card.title }}
          </h3>
                {% if card.description %}
                  <p class="mt-2 text-gray-600 dark:text-gray-300 text-base leading-relaxed">
                    {{ card.description | safe }}
                  </p>
        {% endif %}
        </div>
            {% endif %}

            <div class="chart-card-area space-y-4">
              {% area card, 'chartArea' %}
        </div>
      </article>
        {% endfor %}
      </div>
    {% else %}
      <div class="bg-white dark:bg-gray-900 border border-dashed border-gray-200 dark:border-gray-700 rounded-2xl p-10 text-center">
        <p class="text-gray-600 dark:text-gray-300">
          请在“小部件设置 → 图表卡片”中添加至少一个 Chart Widget。
        </p>
    </div>
    {% endif %}
  </div>
</section>

<style>
  .data-viz-widget [data-chart-widget] {
    width: 100%;
  }
  .data-viz-widget [data-graph-canvas-wrapper] {
    width: 100% !important;
    max-width: 100% !important;
  }
  .data-viz-widget canvas {
    max-width: 100%;
  }
</style>

